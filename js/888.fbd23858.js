"use strict";(self["webpackChunknebulae"]=self["webpackChunknebulae"]||[]).push([[888],{5689:(e,t,l)=>{l.d(t,{Z:()=>S});var i=l(3673),o=l(2323),n=l(8880);const s={class:"text-h6"},a={class:"text-weight-bold"};function c(e,t,l,c,r,d){const u=(0,i.up)("q-card-section"),p=(0,i.up)("q-separator"),m=(0,i.up)("q-item-label"),h=(0,i.up)("q-item-section"),g=(0,i.up)("q-item"),f=(0,i.up)("q-btn"),v=(0,i.up)("q-avatar"),w=(0,i.up)("q-chip"),y=(0,i.up)("q-tooltip"),b=(0,i.up)("q-list"),k=(0,i.up)("q-card-actions"),_=(0,i.up)("q-card"),q=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(q,{ref:"dialogRef",position:e.position,seamless:"",onHide:e.onDialogHide},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"q-dialog-plugin hide-scrollbar"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i._)("div",s,(0,o.zw)(e.title),1)])),_:1}),(0,i.Wm)(p),(0,i.Wm)(b,{separator:""},{default:(0,i.w5)((()=>[e.list.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(g,{key:0},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"text-italic text-grey"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.noItemText),1)])),_:1})])),_:1})])),_:1})),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.list,((t,l)=>((0,i.wg)(),(0,i.j4)(g,{key:l,clickable:"",onClick:l=>e.selectCallback(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{color:"negative",dense:"",flat:"",icon:"delete",onClick:(0,n.iM)((t=>e.removeCallback(l)),["stop","prevent"])},null,8,["onClick"])])),_:2},1024),(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t[e.labelKey]),1)])),_:2},1024),(0,i.Wm)(m,{caption:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t[e.captionKey]),1)])),_:2},1024)])),_:2},1024),(0,i.Wm)(h,{side:""},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{color:"primary","text-color":"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t[e.chipNumberKey]),1)])),_:2},1024),(0,i.Uk)(" "+(0,o.zw)(e.chipText),1)])),_:2},1024),(0,i.Wm)(m)])),_:2},1024),(0,i.Wm)(y,{delay:250,anchor:"center left","max-width":"19ch",self:"center right","transition-hide":"jump-right","transition-show":"jump-left"},{default:(0,i.w5)((()=>[(0,i._)("div",a,(0,o.zw)(e.tooltipTitle),1),(0,i._)("div",null,(0,o.zw)(t[e.tooltipKey]),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,i.Wm)(p),(0,i.Wm)(k,{align:"stretch"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"full-width",flat:"","icon-right":e.dismissIcon,onClick:e.onDismissClick},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.dismissText),1)])),_:1},8,["icon-right","onClick"])])),_:1})])),_:1})])),_:1},8,["position","onHide"])}var r=l(1959),d=l(1701);const u=(0,i.aZ)({name:"ListDialog",emits:d.Z.emits,props:{list:{type:Array,default:()=>[]},position:{type:String,default:"standard"},title:{type:String,default:"Item List"},noItemText:{type:String,default:"No item"},dismissText:{type:String,default:"Dismiss"},chipText:{type:String,default:"chipText"},tooltipTitle:{type:String,default:"Item Info"},tooltipWidth:{type:String,default:"32ch"},labelKey:{type:String,default:"label"},captionKey:{type:String,default:"caption"},chipNumberKey:{type:String,default:"chipNumber"},tooltipKey:{type:String,default:"tooltip"},selectCallback:{type:Function,default:e=>console.log(e)},removeCallback:{type:Function,default:e=>console.log(e)}},setup(e){const{dialogRef:t,onDialogHide:l}=(0,d.Z)(),i={standard:"close",top:"expand_less",right:"chevron_right",bottom:"expand_more",left:"chevron_left"},o=(0,r.Fl)((()=>i[e.position]));return{dialogRef:t,onDialogHide:l,dismissIcon:o}},methods:{onDismissClick(){this.hide()}}});var p=l(4260),m=l(6778),h=l(151),g=l(5589),f=l(5869),v=l(7011),w=l(3414),y=l(2035),b=l(2350),k=l(8240),_=l(7030),q=l(5096),x=l(8870),$=l(9367),I=l(7518),D=l.n(I);const C=(0,p.Z)(u,[["render",c]]),S=C;D()(u,"components",{QDialog:m.Z,QCard:h.Z,QCardSection:g.Z,QSeparator:f.Z,QList:v.Z,QItem:w.Z,QItemSection:y.Z,QItemLabel:b.Z,QBtn:k.Z,QChip:_.Z,QAvatar:q.Z,QTooltip:x.Z,QCardActions:$.Z})},5888:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ie});var i=l(3673),o=l(2323);const n={class:"col-grow column q-gutter-y-sm"};function s(e,t,l,s,a,c){const r=(0,i.up)("HexView"),d=(0,i.up)("DevicePanel"),u=(0,i.up)("ControlPanel"),p=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(p,{class:(0,o.C_)(["flex full-width full-height q-pa-md",e.pageClass])},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i.Wm)(r,{class:"col-grow","color-scheme":"green",icon:"mdi-export",label:e.i18n("labels.sentArea"),modelValue:e.sentMessage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.sentMessage=t),"onData:history":t[1]||(t[1]=t=>e.$refs.control.useHistory(t)),style:{"min-height":"40ch"}},null,8,["label","modelValue"]),(0,i.Wm)(r,{class:"col-grow","color-scheme":"blue",icon:"mdi-import",label:e.i18n("labels.receivedArea"),modelValue:e.receivedMessage,"onUpdate:modelValue":t[2]||(t[2]=t=>e.receivedMessage=t),"onData:history":t[3]||(t[3]=t=>e.$refs.control.useHistory(t)),style:{"min-height":"40ch"}},null,8,["label","modelValue"])]),(0,i._)("div",{class:(0,o.C_)(["col-lg-3 col-xl-2",e.functionAreaClass])},[(0,i.Wm)(d,{class:"col-12 col-sm-4 col-md-3 col-lg-auto"}),(0,i.Wm)(u,{class:"col-grow",ref:"control"},null,512)],2)])),_:1},8,["class"])}var a=l(8880);const c={class:"text-white"},r=["onClick"];function d(e,t,l,n,s,d){const u=(0,i.up)("q-icon"),p=(0,i.up)("q-toolbar-title"),m=(0,i.up)("q-space"),h=(0,i.up)("q-tooltip"),g=(0,i.up)("q-toggle"),f=(0,i.up)("q-btn"),v=(0,i.up)("q-toolbar"),w=(0,i.up)("q-markup-table"),y=(0,i.up)("q-scroll-area"),b=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(b,{class:"column"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:(0,o.C_)([`bg-${e.colorScheme}`,"text-white"])},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{name:e.icon,size:"md"},null,8,["name"]),(0,i.Wm)(p,{class:"gt-xs"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.label),1)])),_:1}),(0,i.Wm)(m),(0,i.Wm)(g,{"checked-icon":"mdi-arrow-collapse-down",color:`${e.colorScheme}-10`,"keep-color":"",size:"lg","unchecked-icon":"subject","model-value":e.autoScroll,"onUpdate:modelValue":t[0]||(t[0]=t=>e.autoScroll=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{delay:500},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("tooltips.autoScroll")),1)])),_:1})])),_:1},8,["color","model-value"]),(0,i.Wm)(f,{dense:"",flat:"","icon-right":"delete_sweep",size:"lg",onClick:t[1]||(t[1]=t=>e.dataList=[])},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{delay:500},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("tooltips.clearData")),1)])),_:1})])),_:1})])),_:1},8,["class"]),(0,i.wy)((0,i.Wm)(y,{class:"col-grow",ref:"scrollArea",style:{"z-index":"2"}},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{bordered:"",dense:"",flat:"",separator:"cell","wrap-cells":""},{default:(0,i.w5)((()=>[(0,i._)("thead",c,[(0,i._)("tr",{class:(0,o.C_)(`bg-${e.colorScheme}-7`)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.dataList[0],((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t,class:"text-center text-no-wrap"},(0,o.zw)(t),1)))),128))],2)]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.dataList,((t,l)=>((0,i.wg)(),(0,i.iD)("tr",{key:l,class:(0,o.C_)((l===e.dataList.length-1?"text-green text-weight-bold ":"")+(l%2?"bg-grey-3":"")),onClick:t=>e.sendHistory(l)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,(t=>((0,i.wg)(),(0,i.iD)("td",{key:t,class:"text-left text-no-wrap"},[(0,i.Uk)((0,o.zw)(t)+" ",1),(0,i.Wm)(h,{delay:500},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("tooltips.copyHistory")),1)])),_:1})])))),128))],10,r)))),128))])])),_:1})])),_:1},512),[[a.F8,this.dataList.length]])])),_:1})}const u=(0,i.aZ)({name:"HexView",props:{modelValue:{type:Object,default:()=>{}},icon:{type:String,default:"subject"},label:{type:String,default:""},colorScheme:{type:String,default:()=>"primary"}},data(){return{autoScroll:!0,scrollInterval:null,dataList:[],oldDataCount:0}},created(){this.scrollInterval=setInterval(this.scrollToBottom,10)},watch:{modelValue(e){e["index"]=this.dataList.length+1,this.dataList.push(e)}},methods:{scrollToBottom(){this.autoScroll&&this.oldDataCount!==this.dataList.length&&(this.oldDataCount=this.dataList.length,this.$refs.scrollArea.setScrollPosition("vertical",this.$refs.scrollArea.getScroll().verticalSize))},sendHistory(e){this.$emit("data:history",this.dataList[e])},i18n(e){return this.$t("components.hexView."+e)}},unmounted(){this.scrollInterval&&clearInterval(this.scrollInterval)}});var p=l(4260),m=l(151),h=l(9570),g=l(4554),f=l(3747),v=l(2025),w=l(8886),y=l(8870),b=l(8240),k=l(7704),_=l(481),q=l(2462),x=l(7518),$=l.n(x);const I=(0,p.Z)(u,[["render",d],["__scopeId","data-v-1448893e"]]),D=I;$()(u,"components",{QCard:m.Z,QToolbar:h.Z,QIcon:g.Z,QToolbarTitle:f.Z,QSpace:v.Z,QToggle:w.Z,QTooltip:y.Z,QBtn:b.Z,QScrollArea:k.Z,QMarkupTable:_.Z,QTable:q.Z});const C={class:"row q-gutter-x-sm"};function S(e,t,l,o,n,s){const a=(0,i.up)("RichSelect"),c=(0,i.up)("q-btn"),r=(0,i.up)("q-card-section"),d=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"full-width column q-gutter-y-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{disabled:null!==e.connectedDevice,selectorLabel:e.i18n("selects.device"),options:e.availableDevices,"prepend-icon":"mdi-information-outline","img-key":"icon","caption-key":"caption",cornerKey:"corner",sideIcon:"mdi-information-outline","no-option":e.i18n("selects.noItem"),"model-value":e.selectedDevice,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedDevice=t),"onClick:prepend":t[1]||(t[1]=t=>e.queryDevice(t)),"onClick:side":t[2]||(t[2]=t=>e.queryDevice(t))},null,8,["disabled","selectorLabel","options","no-option","model-value"]),(0,i._)("div",C,[e.$q.platform.is.electron?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,class:"col-grow",color:"accent","icon-right":"add",label:e.i18n("buttons.request"),unelevated:"",onClick:e.newHID},null,8,["label","onClick"])),(0,i.Wm)(c,{class:"col-grow",color:e.connectedDevice?"negative":"positive",unelevated:"","icon-right":e.connectedDevice?"link_off":"link",label:e.connectedDevice?e.i18n("buttons.disconnect"):e.i18n("buttons.connect"),onClick:t[3]||(t[3]=t=>e.connectedDevice?e.disconnectHID:e.connectHID)},null,8,["color","icon-right","label"])])])),_:1})])),_:1})}const Z={class:"text-h6"};function W(e,t,l,n,s,a){const c=(0,i.up)("q-card-section"),r=(0,i.up)("HidDeviceForest"),d=(0,i.up)("q-btn"),u=(0,i.up)("q-card-actions"),p=(0,i.up)("q-card"),m=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(m,{ref:"dialogRef",onHide:e.onDialogHide,style:{"min-width":"50vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"q-dialog-plugin hide-scrollbar full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i._)("div",Z,(0,o.zw)(e.title),1)])),_:1}),(0,i.Wm)(r,{devices:e.forest},null,8,["devices"]),(0,i.Wm)(u,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{flat:"",label:e.cancelText,onClick:e.cancel},null,8,["label","onClick"]),e.prompt?((0,i.wg)(),(0,i.j4)(d,{key:0,flat:"",label:e.confirmText,color:"primary",onClick:e.confirm},null,8,["label","onClick"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["onHide"])}l(71);var P=l(1701);const R={class:"row items-center q-gutter-x-sm"},Q=["src"],T={key:0,class:"column"},H={class:"row items-center q-gutter-x-sm"},j={key:0,class:"column"};function z(e,t,l,n,s,a){const c=(0,i.up)("q-avatar"),r=(0,i.up)("q-icon"),d=(0,i.up)("q-tree");return(0,i.wg)(),(0,i.j4)(d,{accordion:"",expanded:e.expanded,"onUpdate:expanded":t[0]||(t[0]=t=>e.expanded=t),"node-key":"id",nodes:e.deviceForest},{"header-img":(0,i.w5)((e=>[(0,i._)("div",R,[(0,i.Wm)(c,{size:"sm"},{default:(0,i.w5)((()=>[(0,i._)("img",{alt:"rootAvatar",src:e.node.avatar},null,8,Q)])),_:2},1024),(0,i._)("div",null,(0,o.zw)(e.node.label),1),e.node.side?((0,i.wg)(),(0,i.iD)("div",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.node.side,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"text-caption text-grey q-ml-sm"},(0,o.zw)(e),1)))),128))])):(0,i.kq)("",!0)])])),"header-icon":(0,i.w5)((e=>[(0,i._)("div",H,[(0,i.Wm)(c,{size:"sm"},{default:(0,i.w5)((()=>[e.node.icon?((0,i.wg)(),(0,i.j4)(r,{key:0,size:"sm",name:e.node.icon},null,8,["name"])):(0,i.kq)("",!0)])),_:2},1024),(0,i._)("div",null,(0,o.zw)(e.node.label),1),e.node.side?((0,i.wg)(),(0,i.iD)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.node.side,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"text-caption text-grey q-ml-sm"},(0,o.zw)(e),1)))),128))])):(0,i.kq)("",!0)])])),"body-comments":(0,i.w5)((e=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.node.comments,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},(0,o.zw)(e),1)))),128))])),_:1},8,["expanded","nodes"])}var U=l(1959);const V=(0,i.aZ)({name:"HidDeviceForest",props:{devices:{type:Array,default:()=>[]}},setup(e){function t(e,t){let l=[],i={},o={feature:"mdi-arrow-left-right",input:"mdi-import",output:"mdi-export"};for(const n in t){let l,s=!1;if("featureReports"===n?(s=!0,l="feature"):"inputReports"===n?(s=!0,l="input"):"outputReports"===n&&(s=!0,l="output"),s){let s=0;t[n].forEach((t=>{let n={id:`${e}.reportId_${t.reportId}.${l}_report_${s}`,header:"icon",label:`${l} report ${s}`,icon:o[l]},a=[],c=0;t.items.forEach((e=>{let t={id:`${n.id}.item_${c}`,header:"icon",label:`item ${c}`},l=[];for(const i in e)l.push({id:`${t.id}.${i}`,header:"icon",label:`${i}: ${"usages"===i?"["+e[i].join(", ")+"]":e[i]}`});t["children"]=l,a.push(t),c++})),a.length&&(n["children"]=a),i[t.reportId]||(i[t.reportId]=[]),i[t.reportId].push(n),s++}))}}for(const n in i){let t={id:`${e}.reportId_${n}`,header:"icon",label:`reportId: ${n}`,icon:"mdi-identifier",children:i[n]};l.push(t)}return l}const l=(0,U.Fl)((()=>{let l=[],i=0;return e.devices.forEach((e=>{let o={id:`root_${i}`,header:"img",label:e.productName?e.productName:"Anonymous",avatar:e.icon,side:[`VID:0x${e.vendorId["toString"](16).toUpperCase().padStart(4,"0")}`,`PID:0x${e.productId["toString"](16).toUpperCase().padStart(4,"0")}`]};if(e["collections"].length){let l=[],n=0;e["collections"].forEach((e=>{let o={id:`root_${i}.collection_${n}`,header:"icon",label:`collection ${n}`,icon:"mdi-video-input-component",children:t(`root_${i}.collection_${n}`,e)};l.push(o),n++})),o.children=l}l.push(o),i++})),l})),i=(0,U.iH)([]);return l.value.length&&l.value.forEach((e=>{i.value.push(e.id),e.hasOwnProperty("children")&&e.children.forEach((e=>{e.hasOwnProperty("children")&&i.value.push(e.id)}))})),{deviceForest:l,expanded:i}}});var K=l(5551),E=l(5096);const A=(0,p.Z)(V,[["render",z]]),L=A;$()(V,"components",{QTree:K.Z,QAvatar:E.Z,QIcon:g.Z});const F=(0,i.aZ)({name:"ForestDialog",components:{HidDeviceForest:L},emits:[...P.Z.emits],props:{forest:{type:Array,default:()=>[],required:!0},title:{type:String,default:"Forest"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},prompt:{type:Boolean,default:!1},cancelCallback:{type:Function,default:()=>{}},confirmCallback:{type:Function,default:()=>{}}},setup(){const{dialogRef:e,onDialogHide:t}=(0,P.Z)();return{dialogRef:e,onDialogHide:t}},methods:{cancel(){this.cancelCallback(),this.hide()},confirm(){this.confirmCallback(),this.hide()}}});var N=l(6778),M=l(5589),Y=l(9367);const B=(0,p.Z)(F,[["render",W]]),O=B;$()(F,"components",{QDialog:N.Z,QCard:m.Z,QCardSection:M.Z,QCardActions:Y.Z,QBtn:b.Z});const X={1133:"https://pbs.twimg.com/profile_images/1430206370817708035/EHgjYv4E_400x400.jpg",1155:"https://pbs.twimg.com/profile_images/1239429475886141440/1JCYnfMq_400x400.jpg",1267:"https://www.emc.com.tw/assets/img/logo.png",2821:"https://pbs.twimg.com/profile_images/378800000322776927/f1ae67d3bd3904d0ab83b79e43052592_400x400.png",4292:"https://pbs.twimg.com/profile_images/499101949422084096/ixEv_g0T_400x400.png"};var G=l(5565);function J(e,t,l,n,s,c){const r=(0,i.up)("q-icon"),d=(0,i.up)("q-img"),u=(0,i.up)("q-avatar"),p=(0,i.up)("q-item-section"),m=(0,i.up)("q-item-label"),h=(0,i.up)("q-btn"),g=(0,i.up)("q-item"),f=(0,i.up)("q-select");return(0,i.wg)(),(0,i.j4)(f,{clearable:"",color:"primary",disable:e.disabled,"display-value":e.selected?`${e.selected[e.labelKey]}`:null,"dropdown-icon":"more_horiz",label:e.selectorLabel,"menu-anchor":"top left","menu-self":"bottom left","options-dense":"","options-selected-class":"text-primary",outlined:"",options:e.options,"model-value":e.selected,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selected=t)},(0,i.Nv)({option:(0,i.w5)((t=>[(0,i.Wm)(g,(0,i.dG)(t["itemProps"],{dense:""}),{default:(0,i.w5)((()=>[e.imgKey?((0,i.wg)(),(0,i.j4)(p,{key:0,avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{loading:"lazy","spinner-color":"primary",src:t["opt"][e.imgKey]},null,8,["src"])])),_:2},1024)])),_:2},1024)):(0,i.kq)("",!0),e.labelKey?((0,i.wg)(),(0,i.j4)(p,{key:1,"no-wrap":""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{lines:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t["opt"][e.labelKey]),1)])),_:2},1024),e.captionKey?((0,i.wg)(),(0,i.j4)(m,{key:0,caption:"",lines:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t["opt"][e.captionKey]),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1024)):(0,i.kq)("",!0),e.cornerKey?((0,i.wg)(),(0,i.j4)(p,{key:2,side:"",top:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{caption:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t["opt"][e.cornerKey]),1)])),_:2},1024),(0,i.Wm)(h,{color:"primary",dense:"",flat:"",icon:e.sideIcon,onClick:(0,a.iM)((l=>e.$emit("click:side",t["opt"])),["stop","prevent"])},null,8,["icon","onClick"])])),_:2},1024)):(0,i.kq)("",!0),e.sideIcon?((0,i.wg)(),(0,i.j4)(p,{key:3,side:""})):(0,i.kq)("",!0)])),_:2},1040)])),"no-option":(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"text-italic text-grey"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.noOption),1)])),_:1})])),_:1})])),_:2},[e.prependIcon?{name:"prepend",fn:(0,i.w5)((()=>[(0,i.Wm)(r,{name:e.prependIcon,color:e.selected?"primary":"",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.$emit("click:prepend",e.selected)),["stop","prevent"]))},null,8,["name","color"])]))}:void 0]),1032,["disable","display-value","label","options","model-value"])}const ee=(0,i.aZ)({name:"RichSelect",props:{disabled:{type:Boolean,default:()=>!1},selectorLabel:{type:String,default:()=>"selector"},options:{type:Array,default:()=>[],required:!0},modelValue:{default:()=>null,required:!0},prependIcon:{type:String,default:null},imgKey:{type:String,default:null},labelKey:{type:String,default:"label"},captionKey:{type:String,default:null},cornerKey:{type:String,default:null},sideIcon:{type:String,default:null},noOption:{type:String,default:()=>"No option"}},setup(e,{emit:t}){const l=(0,U.Fl)({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return{selected:l}}});var te=l(3314),le=l(3414),ie=l(2035),oe=l(4027),ne=l(2350);const se=(0,p.Z)(ee,[["render",J]]),ae=se;$()(ee,"components",{QSelect:te.Z,QIcon:g.Z,QItem:le.Z,QItemSection:ie.Z,QAvatar:E.Z,QImg:oe.Z,QItemLabel:ne.Z,QBtn:b.Z});const ce=(0,i.aZ)({name:"HidDevice",components:{RichSelect:ae},data(){return{scanInterval:null,availableDevices:[],dialogOpen:!1,selectedDevice:null,connectedDevice:null}},created(){this.refreshDevices(),this.scanInterval=setInterval(this.refreshDevices,3e3),(0,i.YP)((()=>this.$hid.device),(e=>this.connectedDevice=e))},watch:{selectedDevice(e){console.log(e)}},methods:{refreshDevices(){navigator["hid"]["getDevices"]().then((e=>{for(let t=0;t<e.length;t++)e[t].id=t,e[t].icon=X[e[t].vendorId]?X[e[t].vendorId]:"svg/unknown.svg",e[t].label=e[t].productName?e[t].productName:this.i18n("selects.defaultName"),e[t].caption=`VID: 0x${e[t].vendorId?e[t].vendorId["toString"](16).toUpperCase().padStart(4,"0"):this.i18n("selects.defaultVID")}    PID: 0x${e[t].productId?e[t].productId["toString"](16).toUpperCase().padStart(4,"0"):this.i18n("selects.defaultPID")}`,e[t].corner=e[t]["collections"].length+this.i18n("selects.unit");this.availableDevices=e}))},queryDevice(e){e&&!this.dialogOpen&&(this.dialogOpen=!0,this.$q.dialog({component:O,componentProps:{forest:[e],title:this.i18n("infoDialog.title"),cancelText:this.i18n("infoDialog.cancelText")}}).onDismiss((()=>this.dialogOpen=!1)))},connectHID(){this.selectedDevice?this.$hid.connect(this.selectedDevice):this.$q.notify({type:"warning",message:this.i18n("notifications.invalidDevice"),icon:"device_unknown"})},newHID(){navigator["hid"]["requestDevice"]({filters:[]}).then((async e=>{if(0!==e.length){console.log(e);let t=null;this.dialogOpen=!0,this.$q.dialog({component:O,componentProps:{forest:e,title:this.i18n("checkDialog.title"),confirmText:this.i18n("checkDialog.confirmText"),cancelText:this.i18n("checkDialog.cancelText"),prompt:!0,cancelCallback:()=>t=!1,confirmCallback:()=>t=!0}}).onDismiss((()=>this.dialogOpen=!1));while(null===t)await(0,G._v)(100);t&&this.$hid.connect(e[0])}}))},disconnectHID(){this.$hid.disconnect()},i18n(e){return this.$t("components.hidDevice."+e)}},unmounted(){this.scanInterval&&clearInterval(this.scanInterval)}}),re=(0,p.Z)(ce,[["render",S]]),de=re;$()(ce,"components",{QCard:m.Z,QCardSection:M.Z,QBtn:b.Z});const ue=(0,i._)("div",null,null,-1);function pe(e,t,l,n,s,a){const c=(0,i.up)("q-avatar"),r=(0,i.up)("q-chip"),d=(0,i.up)("q-item-label"),u=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),m=(0,i.up)("q-select"),h=(0,i.up)("q-btn"),g=(0,i.up)("q-space"),f=(0,i.up)("q-tooltip"),v=(0,i.up)("q-input"),w=(0,i.up)("q-card-section"),y=(0,i.up)("HexInput"),b=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:(0,o.C_)(["full-width",e.actionSectionClass])},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,o.C_)(e.actionPairClass)},[(0,i.Wm)(r,{dense:e.$q.screen.lt.sm,disable:!e.enablePanel||!e.selectedReport},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:"primary","text-color":"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.selectedReport?e.selectedReport.bytes:"?"),1)])),_:1}),(0,i.Uk)(" "+(0,o.zw)(e.i18n("selects.unit")),1)])),_:1},8,["dense","disable"]),(0,i.Wm)(m,{class:"col-grow",clearable:"",color:"primary",dense:"",disable:!e.enablePanel,"display-value":e.selectedReport?`${e.selectedReport.id}`:null,"dropdown-icon":"expand_less",label:e.$q.screen.gt.xs?e.i18n("selects.report"):e.i18n("selects.reportShort"),"menu-anchor":e.vertical?"top left":"bottom left","menu-self":e.vertical?"bottom left":"top left","options-dense":"","options-selected-class":"text-primary",outlined:"",options:e.reportList,"model-value":e.selectedReport,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedReport=t),style:(0,o.j5)({minWidth:e.$q.screen.gt.xs?"20ch":"10ch"})},{option:(0,i.w5)((t=>[(0,i.Wm)(p,(0,i.dG)(t["itemProps"],{dense:""}),{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t["opt"].id),1)])),_:2},1024)])),_:2},1024),(0,i.Wm)(u,{side:""},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{caption:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t["opt"].bytes+e.i18n("selects.unit")),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-italic text-grey"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("selects.noItem")),1)])),_:1})])),_:1})])),_:1},8,["disable","display-value","label","menu-anchor","menu-self","options","model-value","style"])],2),(0,i._)("div",{class:(0,o.C_)(e.actionPairClass)},[(0,i.Wm)(h,{color:"primary",dense:"",disable:!e.enablePanel||!e.selectedReport,unelevated:"","icon-right":"send",label:e.$q.screen.gt.xs?e.i18n("buttons.send"):e.i18n("buttons.sendShort"),onClick:e.sendReport},null,8,["disable","label","onClick"]),(0,i.Wm)(h,{color:"negative",dense:"",disable:!e.enablePanel||!e.selectedReport,"icon-right":"delete_sweep",label:e.$q.screen.gt.xs?e.i18n("buttons.clear"):e.i18n("buttons.clearShort"),unelevated:"",onClick:e.clearDataPacks},null,8,["disable","label","onClick"])],2),(0,i.Wm)(g),(0,i._)("div",null,[(0,i.Wm)(v,{class:"col-grow",clearable:"",dense:"",disable:!e.enablePanel||!e.selectedReport,label:e.i18n("inputs.label"),maxlength:32,outlined:"","model-value":e.saveName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.saveName=t)},{before:(0,i.w5)((()=>[(0,i.Wm)(h,{color:"accent",disable:!e.enablePanel||!e.selectedReport,icon:"book",outline:!e.dialog,unelevated:null!==e.dialog,padding:"sm",onClick:e.toggleDialog},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{delay:300},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("tooltips.openSaves")),1)])),_:1})])),_:1},8,["disable","outline","unelevated","onClick"])])),after:(0,i.w5)((()=>[(0,i.Wm)(h,{color:"primary",disable:!e.enablePanel||!e.selectedReport,icon:"save",outline:"",padding:"sm",onClick:e.saveReport},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{delay:300},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.i18n("tooltips.saveReport")),1)])),_:1})])),_:1},8,["disable","onClick"])])),_:1},8,["disable","label","model-value"])]),ue])),_:1},8,["class"]),(0,i.Wm)(w,{class:"full-width row items-start justify-between"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Math.ceil(e.selectedReport?e.selectedReport.bytes/8:0),(t=>((0,i.wg)(),(0,i.j4)(y,{key:t,ref_for:!0,ref:`hexInput${t}`,class:"col-3 q-gutter-x-sm",index:t,"previous-focus":e.previousFocusedIndex,bytes:e.dataPacks[t-1].length/2,modelValue:e.dataPacks[t-1],"onUpdate:modelValue":l=>e.dataPacks[t-1]=l,"onEvent:focus":l=>e.previousFocusedIndex=t,"onEvent:previous":l=>e.previousInput(t),"onEvent:next":l=>e.nextInput(t)},null,8,["index","previous-focus","bytes","modelValue","onUpdate:modelValue","onEvent:focus","onEvent:previous","onEvent:next"])))),128))])),_:1})])),_:1})}l(979),l(6105),l(5123),l(2396);function me(e,t,l,o,n,s){const a=(0,i.up)("q-input");return(0,i.wg)(),(0,i.j4)(a,{"bottom-slots":"",dense:"","fill-mask":"0",mask:e.dataMask,ref:"input",outlined:"","unmasked-value":"","model-value":e.rawData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.rawData=t),rules:[e.dataRule],onFocus:e.onFocus,onBlur:t[1]||(t[1]=t=>e.focused=!1)},null,8,["mask","model-value","rules","onFocus"])}const he=(0,i.aZ)({name:"HexInput",props:{modelValue:{type:String,default:()=>""},index:{type:Number,default:-1},bytes:{type:Number,default:()=>0},label:{type:String,default:()=>""},previousFocus:{type:Number,default:()=>-1}},setup(e,{emit:t}){let l=new Array(e.bytes).fill("XX").join(" ");const i=(0,U.Fl)({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return{dataMask:l,rawData:i}},data(){return{focused:!1}},mounted(){let e=this.$refs.input.getNativeElement();e.addEventListener("input",(t=>{t.isTrusted&&"deleteContentBackward"===t.inputType&&0===e.selectionStart?setTimeout((()=>{this.$emit("event:previous")}),10):t.isTrusted&&"insertText"===t.inputType&&e.selectionStart===e.value.length&&setTimeout((()=>{this.$emit("event:next")}),10)})),e.addEventListener("beforeinput",(t=>{t.isTrusted&&"deleteContentBackward"===t.inputType&&0===e.selectionStart?setTimeout((()=>{this.$emit("event:previous")}),10):t.isTrusted&&"insertText"===t.inputType&&e.selectionStart===e.value.length&&setTimeout((()=>{this.$emit("event:next")}),10)}))},watch:{bytes(e){this.dataMask=new Array(e).fill("XX").join(" ")}},methods:{dataRule(e){if(e)return!(!e.hasOwnProperty("length")||-1!==e.search(/[G-Z]+/))||"Invalid report data"},onFocus(){this.index>this.previousFocus?(this.$refs.input.getNativeElement().selectionStart=0,this.$refs.input.getNativeElement().selectionEnd=0):this.index<this.previousFocus&&(this.$refs.input.getNativeElement().selectionStart=this.$refs.input.getNativeElement().value.length,this.$refs.input.getNativeElement().selectionEnd=this.$refs.input.getNativeElement().value.length),this.focused=!0,this.$emit("event:focus")},focus(){this.$refs.input.focus()}}});var ge=l(4842);const fe=(0,p.Z)(he,[["render",me]]),ve=fe;$()(he,"components",{QInput:ge.Z});var we=l(5689);const ye=(0,i.aZ)({name:"HidControl",components:{HexInput:ve},data(){return{enablePanel:!1,previousFocusedIndex:-1,selectedReport:null,reportList:[],dataPacks:new Array(8).fill(new Uint8Array(16).join("")),saveName:null,savedReports:[],dialog:null}},created(){(0,i.YP)((()=>this.$hid.device),(e=>{if(e){this.enablePanel=!0;let t=[];e["collections"].forEach((e=>{e["outputReports"]&&e["outputReports"].forEach((e=>{t.push({id:e["reportId"],bytes:e.items[0]["reportCount"],usages:e.items[0]["usages"]})}))})),this.reportList=t,t[0]&&(this.selectedReport=t[0]);let l=this.$q.localStorage.getItem(`data.hidReports.${e["vendorId"]}_${e["productId"]}`);l&&(this.savedReports=l)}else this.selectedReport=null,this.enablePanel=!1,this.dialog=null}))},computed:{vertical(){return this.$q.screen.gt.sm&&this.$q.screen.lt.lg},actionSectionClass(){return this.$q.screen.gt.sm&&this.$q.screen.lt.lg?["row","items-center","q-gutter-x-sm"]:["column","justify-end","q-gutter-y-sm"]},actionPairClass(){return this.$q.screen.gt.sm&&this.$q.screen.lt.lg?["column","justify-between","q-gutter-y-sm"]:["row","items-center","justify-end","q-gutter-x-sm"]}},watch:{selectedReport(e){if(!e)return;let t=e.bytes,l=Math.ceil(t/8),i=2*(t%8===0?8:t%8);l>this.dataPacks.length?this.dataPacks.push.apply(this.dataPacks,new Array(l-this.dataPacks.length).fill(new Uint8Array(16).join(""))):l<this.dataPacks.length&&(this.dataPacks=this.dataPacks.slice(0,l)),i>this.dataPacks[l-1].length?this.dataPacks[l-1]=this.dataPacks[l-1]+new Array(i-this.dataPacks[l-1].length).fill(0).join(""):i<this.dataPacks[l-1].length&&(this.dataPacks[l-1]=this.dataPacks[l-1].slice(0,i))}},methods:{previousInput(e){this.$refs["hexInput"+(e-1)]&&this.$refs["hexInput"+(e-1)][0].focus()},nextInput(e){this.$refs[`hexInput${e+1}`]&&this.$refs[`hexInput${e+1}`][0].focus()},sendReport(){this.$hid.sendReport(this.selectedReport.id,(0,G.ii)(this.dataPacks.join("")))},clearDataPacks(){let e=new Array(this.dataPacks.length);for(let t=0;t<this.dataPacks.length;t++)e[t]=new Array(this.dataPacks[t].length).fill("0").join("");this.dataPacks=e,this.$q.notify({type:"info",message:this.i18n("notifications.clearData"),icon:"mdi-numeric-0-box-multiple-outline"})},useHistory(e){let t=!1;this.reportList.forEach((l=>{if(l.id===e.id){this.selectedReport=l;let i=0;for(let t in e)"index"!==t&&"id"!==t&&(this.dataPacks[i]=e[t].split(" ").join(""),i++);t=!0}})),t?this.$q.notify({type:"positive",message:this.i18n("notifications.validHistory"),icon:"mdi-comment-check-outline"}):this.$q.notify({type:"warning",message:this.i18n("notifications.invalidHistory"),icon:"mdi-message-alert-outline"})},toggleDialog(){this.dialog?this.dialog.hide():this.dialog=this.$q.dialog({component:we.Z,componentProps:{list:this.savedReports,position:this.$q.screen.lt.lg?"right":"top",title:this.i18n("dialog.title"),noItemText:this.i18n("dialog.noItemText"),dismissText:this.i18n("dialog.dismissText"),chipText:this.i18n("dialog.chipText"),tooltipTitle:this.i18n("dialog.tooltipTitle"),tooltipWidth:"19ch",chipNumberKey:"reportId",selectCallback:this.loadReport,removeCallback:this.deleteReport}}).onDismiss((()=>{this.dialog=null}))},saveReport(){let e={label:this.saveName,caption:`VID: 0x${this.$hid.device.vendorId.toString(16).toUpperCase().padStart(4,"0")} PID: 0x${this.$hid.device.productId.toString(16).toUpperCase().padStart(4,"0")}`,tooltip:this.dataPacks.join("\n"),reportId:this.selectedReport.id,data:this.dataPacks.join(" ").split(" ")};this.savedReports.push(e),this.$q.localStorage.set(`data.hidReports.${this.$hid.device.vendorId}_${this.$hid.device.productId}`,this.savedReports),this.$q.notify({type:"positive",message:this.i18n("notifications.saveSuccess"),icon:"mdi-archive-arrow-down-outline"})},deleteReport(e){this.savedReports.splice(e,1),this.$q.localStorage.set(`data.hidReports.${this.$hid.device.vendorId}_${this.$hid.device.productId}`,this.savedReports),this.$q.notify({type:"info",message:this.i18n("notifications.deleteSuccess"),icon:"mdi-archive-minus-outline"})},loadReport(e){let t=!1;this.reportList.forEach((l=>{l.id===e.reportId&&(this.selectedReport=l,this.dataPacks=e.data.join(" ").split(" "),t=!0)})),t?this.$q.notify({type:"positive",message:this.i18n("notifications.loadSuccess"),icon:"mdi-archive-arrow-up-outline"}):this.$q.notify({type:"warning",message:this.i18n("notifications.loadFailed"),icon:"mdi-archive-remove-outline"})},i18n(e){return this.$t("components.hidControl."+e)}}});var be=l(7030);const ke=(0,p.Z)(ye,[["render",pe]]),_e=ke;$()(ye,"components",{QCard:m.Z,QCardSection:M.Z,QChip:be.Z,QAvatar:E.Z,QSelect:te.Z,QItem:le.Z,QItemSection:ie.Z,QItemLabel:ne.Z,QBtn:b.Z,QSpace:v.Z,QInput:ge.Z,QTooltip:y.Z});const qe=(0,i.aZ)({name:"HidMonitor",components:{ControlPanel:_e,DevicePanel:de,HexView:D},data(){return{sentMessage:null,receivedMessage:null}},created(){(0,i.YP)((()=>this.$hid.sentMessage),(e=>this.sentMessage=e)),(0,i.YP)((()=>this.$hid.receivedMessage),(e=>this.receivedMessage=e))},computed:{pageClass(){return this.$q.screen.lt.lg?["column","q-gutter-y-sm"]:["row","q-gutter-x-sm"]},functionAreaClass(){return this.$q.screen.gt.xs&&this.$q.screen.lt.lg?["row","q-gutter-x-sm"]:["column","q-gutter-y-sm"]}},methods:{i18n(e){return this.$t("pages.hidMonitor."+e)}}});var xe=l(4379);const $e=(0,p.Z)(qe,[["render",s]]),Ie=$e;$()(qe,"components",{QPage:xe.Z})}}]);